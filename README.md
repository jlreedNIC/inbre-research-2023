# Project Status:

The project has reached the **initial testing phase** and is considered **complete** at this stage. We have completed the primary development and testing, and the project is functioning as intended based on the initial requirements.

# PCNA Cell Counter
This project takes .nd2 files generated by a confocal microscope and segments the proliferating cells and their nuclei found in zebrafish retinal layers by using a variety of computer vision techniques.

Project was completed in the summer of 2023 under direction of Dr. Seth Long from Lewis and Clark State College for the Mitchell Lab at the University of Idaho.

**This project was supported by an Institutional Development Award (IDeA) from the National Institute of General Medical Sciences of the National Institutes of Health under Grant #P20GM103408**

## Abstract

### Image Segmentation on Proliferating Retinal Cells

Zebrafish have the remarkable ability to regenerate their retina after injury through Muller glia, which are responsible for giving rise to regenerated neurons, and microglia, which appear to provide signals to help regulate this regenerative response. The Mitchell lab is currently investigating how an inflammatory signaling cascade in microglia (mediated by a protein called MYD88) affects the Muller glial regenerative response in zebrafish retinas. The lab uses confocal microscopy to capture images of regenerating zebrafish retinas stained for markers of proliferation (PCNA), Muller glia (MG), microglia, and cell nuclei (DAPI). The resulting images show densely packed proliferating MG-derived progenitor cells that are challenging to quantify. Manual counts of the cells are tedious, time consuming, and subject to bias, so a semi-automated process using ImageJâ€™s Fiji software had been applied in an attempt to count the proliferating cells but was not able to sufficiently segment clusters of cells. Therefore, an image segmentation algorithm was developed by the Long computer science lab to better distinguish individual proliferating cells by using computer vision techniques and overlaying the DAPI stain with he PCNA stain. The computer vision techniques used were: unsharp masking, Canny edge detection, Otsu and multi-Otsu thresholding, local thresholding, and a morphological opening operation. The algorithm can segment cells in an image within 6-12 seconds using common PC hardware and can identify more cells than the current Fiji implementation. The algorithm provides a viable alternative to manual counting that is fast and efficient. Further work is recommended on manual counts, to accurately identify the program accuracy, and potentially developing segmentation algorithms for the DAPI and PCNA stains separately.

## How to Download and Run the PCNA Counter

Notes:
- Tested on Windows and Linux.
- You need to have Python installed.

### If you have Git on your computer:
- Navigate to the folder you want the program in.
- Type `git clone https://github.com/jlreedNIC/inbre-research-2023.git`

### If you don't have Git:
- Download the latest release (located on the right hand side of the main GitHub repository).
    - Either the entire source code or the release code.
- Extract to the location you want the program.

### Running the program
- Run `python3 RUN_FIRST.py`
- Follow the instructions the script outputs to install required libraries.
- Open `pcna_counter.py` 
- Edit the user variables to have YOUR folder for the .nd2 file locations.
    - The program will loop through EVERY file in this folder.
    - Any file that cannot be opened by the program will have the name stored in a file called `file_error_files.txt`. You will have to manually delete the names from the file before each successive run.
- Edit other user variables as you see fit.
- Run `python3 pcna_counter.py`